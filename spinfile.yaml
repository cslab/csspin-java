# The spinfile.yaml for spin_python is required since building the documentation
# requires a provisioned project.
plugin_packages:
    - spin_docs
    - spin_python
    - '../spin_java'

plugins:
    - spin_java:
          - mvn
          - java
    - spin_docs.sphinx

python:
    version: '3.11.9'

java:
    version: '19'

sphinx:
    build_dir: _build

build_rules:
    task docs:
        sources: doc/_schemaref.rst
    doc/_schemaref.rst:
        sources: [src/spin_java]
        spin:
            - schemadoc mvn --rst -o doc/plugins/mvn_schemaref.rst
            - schemadoc java --rst -o doc/plugins/java_schemaref.rst
